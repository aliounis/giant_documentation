
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Tracker &#8212; GIANT 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Tracker.filter_ekfs" href="giant.ufo.ekf_tracker.Tracker.filter_ekfs.html" />
    <link rel="prev" title="giant.ufo.ekf_tracker" href="../giant.ufo.ekf_tracker.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A powerful API for Optical Navigation</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installing GIANT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../giant.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../giant.html#indices">Indices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../../giant.html">API Reference</a><ul>
  <li><a href="../../giant.ufo.html">giant.ufo</a><ul>
  <li><a href="../giant.ufo.ekf_tracker.html">giant.ufo.ekf_tracker</a><ul>
      <li>Previous: <a href="../giant.ufo.ekf_tracker.html" title="previous chapter">giant.ufo.ekf_tracker</a></li>
      <li>Next: <a href="giant.ufo.ekf_tracker.Tracker.filter_ekfs.html" title="next chapter">Tracker.filter_ekfs</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="../giant.ufo.ekf_tracker.html" title="Previous document">giant.ufo.ekf_tracker</a>
        </li>
        <li>
          <a href="giant.ufo.ekf_tracker.Tracker.filter_ekfs.html" title="Next document">Tracker.filter_ekfs</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="tracker">
<h1>Tracker<a class="headerlink" href="#tracker" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../giant.ufo.ekf_tracker.html#module-giant.ufo.ekf_tracker" title="giant.ufo.ekf_tracker"><code class="xref py py-mod docutils literal notranslate"><span class="pre">giant.ufo.ekf_tracker</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="giant.ufo.ekf_tracker.Tracker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">giant.ufo.ekf_tracker.</span></span><span class="sig-name descname"><span class="pre">Tracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_initializer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_distance_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_trees</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_euclidean_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_covariance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_image_timedelta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">datetime.timedelta(seconds=3600)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_paths_per_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_paths_total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_forward_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_track_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_mahalanobis_distance_squared</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_convergence_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduced_paths_forward_per_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_number_of_measurements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_residual_standard_deviation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_time_outs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_tracking_time_per_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/giant/ufo/ekf_tracker.html#Tracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#giant.ufo.ekf_tracker.Tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides an interface for autonomously tracking UFOs through subsequent images in time.</p>
<p>There are 2 main components to this tracker.  The first is the use of EKFs to follow most of the possible paths
forward from a single starting particle in an image.  This can result in hundreds of thousands (if not millions) of
possible tracks for a set of images with fairly dense UFO detections.  The second component is then the filtering of
these EKFs, which is done based on length (the number of measurements included in the EKF), post-fit residual
statistics, and uniqueness (each starting particle only gets the best track assigned to it, and once a particle has
been assigned to a track it can’t be assigned to others).  This filtering process normally brings the number of
tracks down to a much more manageable 10s to 100s.</p>
<p>Explicit details on how this tracker works are provided in the paper at
<a class="reference external" href="https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2019EA000843">https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2019EA000843</a> and are not repeated here.</p>
<p>To use this class, provide the (numerous) initialization values (the defaults will be fine for many cases) and then
call method <a class="reference internal" href="giant.ufo.ekf_tracker.Tracker.track.html#giant.ufo.ekf_tracker.Tracker.track" title="giant.ufo.ekf_tracker.Tracker.track"><code class="xref py py-meth docutils literal notranslate"><span class="pre">track()</span></code></a>.  The results will then be stored in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">confirmed_filters</span></code>,
<code class="xref py py-attr docutils literal notranslate"><span class="pre">confirmed_particles</span></code>, and <code class="xref py py-attr docutils literal notranslate"><span class="pre">confirmed_standard_deviations</span></code> attributes.  In general, you may not directly
interact with this class however, and instead will use the <code class="xref py py-class docutils literal notranslate"><span class="pre">UFO</span></code> interface class to both detect and track
particles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>camera</strong> (<a class="reference internal" href="../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><em>giant.camera.Camera</em></a>) – The <a class="reference internal" href="../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><code class="xref py py-class docutils literal notranslate"><span class="pre">Camera</span></code></a> containing the images to process and the camera model</p></li>
<li><p><strong>scene</strong> (<a class="reference internal" href="../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene" title="giant.ray_tracer.scene.Scene"><em>giant.ray_tracer.scene.Scene</em></a>) – The <a class="reference internal" href="../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene" title="giant.ray_tracer.scene.Scene"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scene</span></code></a> describing the location of the central body with respect to the camera.</p></li>
<li><p><strong>dynamics</strong> (<a class="reference internal" href="../dynamics/giant.ufo.dynamics.Dynamics.html#giant.ufo.dynamics.Dynamics" title="giant.ufo.dynamics.Dynamics"><em>giant.ufo.dynamics.Dynamics</em></a>) – The dynamics model to use in the EKF for propagating the state from one time to another</p></li>
<li><p><strong>state_initializer</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="../measurements/giant.ufo.measurements.Measurement.html#giant.ufo.measurements.Measurement" title="giant.ufo.measurements.Measurement"><em>giant.ufo.measurements.Measurement</em></a><em>, </em><em>Type</em><em>[</em><em>giant.ufo.dynamics.Dynamics.State</em><em>]</em><em>]</em><em>, </em><em>giant.ufo.dynamics.Dynamics.State</em><em>]</em>) – A callable which takes in a <a class="reference internal" href="../measurements/giant.ufo.measurements.Measurement.html#giant.ufo.measurements.Measurement" title="giant.ufo.measurements.Measurement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Measurement</span></code></a> instance and
<code class="xref py py-class docutils literal notranslate"><span class="pre">Dynamics.State</span></code> class object and returns an initialized state.</p></li>
<li><p><strong>search_distance_function</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="../extended_kalman_filter/giant.ufo.extended_kalman_filter.ExtendedKalmanFilter.html#giant.ufo.extended_kalman_filter.ExtendedKalmanFilter" title="giant.ufo.extended_kalman_filter.ExtendedKalmanFilter"><em>giant.ufo.extended_kalman_filter.ExtendedKalmanFilter</em></a><em>]</em><em>, </em><em>numbers.Real</em><em>]</em>) – A callable which takes in an <a class="reference internal" href="../extended_kalman_filter/giant.ufo.extended_kalman_filter.ExtendedKalmanFilter.html#giant.ufo.extended_kalman_filter.ExtendedKalmanFilter" title="giant.ufo.extended_kalman_filter.ExtendedKalmanFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtendedKalmanFilter</span></code></a> and returns what
the Euclidean search distance should be for that EKF in pixels.  This is only
applied after the first pair has been made</p></li>
<li><p><strong>observation_trees</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Optional</em><em>[</em><em>scipy.spatial.ckdtree.cKDTree</em><em>]</em><em>]</em><em>]</em>) – A list of scipy.spatial cKDTree objects that are built on the pixel locations of the
detections for each image</p></li>
<li><p><strong>observation_ids</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Optional</em><em>[</em><em>List</em><em>[</em><em>int</em><em>]</em><em>]</em><em>]</em><em>]</em>) – A list of the ids for each observation contained in the trees in order.</p></li>
<li><p><strong>initial_euclidean_threshold</strong> (<em>numbers.Real</em>) – The threshold in pixels for points to be paired form the first image to a
subsequent image.  This is not applied after the first pair has been made.</p></li>
<li><p><strong>measurement_covariance</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – The covariance matrix of the measurements as a 2x2 array.  This should have units
of pixels squared.</p></li>
<li><p><strong>maximum_image_timedelta</strong> (<em>datetime.timedelta</em>) – The maximum time separation between images to attempt either initial or
subsequent pairings as a <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> object</p></li>
<li><p><strong>maximum_paths_per_image</strong> (<em>int</em>) – The maximum number of forward paths for a single particle to the next image to
consider</p></li>
<li><p><strong>maximum_paths_total</strong> (<em>int</em>) – The total maximum number of forward paths for a single image across all images to
consider</p></li>
<li><p><strong>maximum_forward_images</strong> (<em>int</em>) – The maximum number of images to retrieve potential pairs from (images will be
processed in time order)</p></li>
<li><p><strong>maximum_track_length</strong> (<em>int</em>) – The maximum length of a track before it is artificially terminated.  The length of
a track is defined as the number of measurements that it has ingested</p></li>
<li><p><strong>maximum_mahalanobis_distance_squared</strong> (<em>float</em>) – The maximum squared Mahalanobis distance for subsequent (not
initial) observations to be paired to a track.</p></li>
<li><p><strong>expected_convergence_number</strong> (<em>int</em>) – The number of ingested measurements at which point tracks are expected to be
fairly converged.  At this point, more stringent filtering is used in
determining forward paths.</p></li>
<li><p><strong>reduced_paths_forward_per_image</strong> (<em>int</em>) – The number of paths forward per image that are considered once a track
is considered converged.</p></li>
<li><p><strong>minimum_number_of_measurements</strong> (<em>int</em>) – The minimum number of measurements in a track for it to be considered a
potential good track.  Typically 4 should be the absolute minimum, but in
some cases it may need to be even higher than that.</p></li>
<li><p><strong>maximum_residual_standard_deviation</strong> (<em>numbers.Real</em>) – The maximum standard deviation of the post-fit residuals in an EKF
for it to be considered a potentially good track.</p></li>
<li><p><strong>maximum_time_outs</strong> (<em>int</em>) – The maximum number of time outs that can occur when attempting to retrieve tracking
results from the children processes before we assume something has gone wrong and
terminate all of the processes.</p></li>
<li><p><strong>maximum_tracking_time_per_image</strong> (<em>numbers.Real</em>) – The maximum amount of time to attempt tracking in the image before we
assume something has gone wrong and terminate all of the processes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p class="rubric">Summary of Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.ufo.ekf_tracker.Tracker.filter_ekfs.html#giant.ufo.ekf_tracker.Tracker.filter_ekfs" title="giant.ufo.ekf_tracker.Tracker.filter_ekfs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_ekfs</span></code></a></p></td>
<td><p>This method does backwards smoothing on each EKF and figures out which are actually valid</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="giant.ufo.ekf_tracker.Tracker.find_initial_pairs.html#giant.ufo.ekf_tracker.Tracker.find_initial_pairs" title="giant.ufo.ekf_tracker.Tracker.find_initial_pairs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_initial_pairs</span></code></a></p></td>
<td><p>This method finds the initial pairs for the input image.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.ufo.ekf_tracker.Tracker.save_results.html#giant.ufo.ekf_tracker.Tracker.save_results" title="giant.ufo.ekf_tracker.Tracker.save_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_results</span></code></a></p></td>
<td><p>This method saves the final ekfs to a csv file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="giant.ufo.ekf_tracker.Tracker.track.html#giant.ufo.ekf_tracker.Tracker.track" title="giant.ufo.ekf_tracker.Tracker.track"><code class="xref py py-obj docutils literal notranslate"><span class="pre">track</span></code></a></p></td>
<td><p>This method tracks particles from image to image using the EKF.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="../giant.ufo.ekf_tracker.html" title="Previous document">giant.ufo.ekf_tracker</a>
        </li>
        <li>
          <a href="giant.ufo.ekf_tracker.Tracker.filter_ekfs.html" title="Next document">Tracker.filter_ekfs</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021 United States Government.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/ufo/ekf_tracker/giant.ufo.ekf_tracker.Tracker.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>